# üöÄ –î–µ–ø–ª–æ–π BiomorphX + Medusa –Ω–∞ Beget

## üéØ –ü–æ–ª–Ω–∞—è e-commerce —Å–∏—Å—Ç–µ–º–∞

–¢–µ–ø–µ—Ä—å –≤–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –∏–º–µ—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏ —Å:
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–∞–º–∏ —á–µ—Ä–µ–∑ Medusa
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–æ–π –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–æ–π –ø–ª–∞—Ç–µ–∂–µ–π (Stripe, –°–±–µ—Ä–±–∞–Ω–∫)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞–º–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–æ–π —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
npm install

# –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run build
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Beget

#### 2.1 –ü–æ–∫—É–ø–∫–∞ —Ö–æ—Å—Ç–∏–Ω–≥–∞
- **–¢–∞—Ä–∏—Ñ**: "–ë–∏–∑–Ω–µ—Å" (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Node.js + PostgreSQL)
- **–î–æ–º–µ–Ω**: –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

#### 2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node.js
1. –í –ø–∞–Ω–µ–ª–∏ Beget ‚Üí "Node.js"
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - **–ò–º—è**: `biomorphx-frontend`
   - **–í–µ—Ä—Å–∏—è Node.js**: `18.x`
   - **–ü–æ—Ä—Ç**: `3000`

#### 2.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
1. –í –ø–∞–Ω–µ–ª–∏ Beget ‚Üí "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
2. –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É:
   - **–ò–º—è**: `biomorphx_medusa`
   - **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `biomorphx_user`
   - **–ü–∞—Ä–æ–ª—å**: —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Medusa Backend

#### 3.1 –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è Medusa
```bash
# –í –ø–∞–Ω–µ–ª–∏ Beget —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–µ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# –ò–º—è: biomorphx-backend
# –ü–æ—Ä—Ç: 9000
```

#### 3.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Medusa Backend
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH
ssh username@your-server.com

# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è backend
mkdir medusa-backend
cd medusa-backend

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ Medusa
npx create-medusa-app@latest

# –í—ã–±–µ—Ä–∏—Ç–µ:
# - Backend only
# - PostgreSQL
# - Redis (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
```

#### 3.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgres://biomorphx_user:your_password@localhost:5432/biomorphx_medusa

# Redis (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
REDIS_URL=redis://localhost:6379

# JWT —Å–µ–∫—Ä–µ—Ç
JWT_SECRET=your-super-secret-jwt-key-here

# Cookie —Å–µ–∫—Ä–µ—Ç
COOKIE_SECRET=your-super-secret-cookie-key-here

# –ü–ª–∞—Ç–µ–∂–∏ (Stripe)
STRIPE_API_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# –î–æ—Å—Ç–∞–≤–∫–∞
SHIPPO_API_KEY=shippo_test_...
```

#### 3.4 –ó–∞–ø—É—Å–∫ Medusa Backend
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npx medusa migrations run

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
npm run start
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend (Next.js)

#### 4.1 –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã frontend –≤ –ø–∞–ø–∫—É biomorphx-frontend
# –í–∫–ª—é—á–∞—è:
# - package.json
# - src/
# - public/
# - next.config.js
# - server.js
```

#### 4.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ frontend
nano .env
```

```env
# Medusa Backend URL
NEXT_PUBLIC_MEDUSA_BACKEND_URL=http://localhost:9000

# –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
# NEXT_PUBLIC_MEDUSA_BACKEND_URL=https://api.yourdomain.com
```

#### 4.3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–±–æ—Ä–∫–∞
```bash
npm install
npm run build
npm start
```

### 5. –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤

#### 5.1 –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –í –ø–∞–ø–∫–µ frontend
node scripts/migrate-products.js
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL

#### 6.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS
1. –í –ø–∞–Ω–µ–ª–∏ Beget ‚Üí "–î–æ–º–µ–Ω—ã"
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏:
   - `yourdomain.com` ‚Üí frontend (–ø–æ—Ä—Ç 3000)
   - `api.yourdomain.com` ‚Üí backend (–ø–æ—Ä—Ç 9000)

#### 6.2 SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ SSL –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ SSL –¥–ª—è API –ø–æ–¥–¥–æ–º–µ–Ω–∞

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

#### 7.1 Stripe
```bash
# –í –ø–∞–ø–∫–µ medusa-backend
npm install medusa-payment-stripe

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ medusa-config.js
const plugins = [
  {
    resolve: "medusa-payment-stripe",
    options: {
      api_key: process.env.STRIPE_API_KEY,
      webhook_secret: process.env.STRIPE_WEBHOOK_SECRET,
    },
  },
]
```

#### 7.2 –†–æ—Å—Å–∏–π—Å–∫–∏–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
```bash
# –°–±–µ—Ä–±–∞–Ω–∫
npm install medusa-payment-sberbank

# –ÆMoney
npm install medusa-payment-yoomoney
```

### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

```bash
# –°–î–≠–ö
npm install medusa-shipping-cdek

# –ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏
npm install medusa-shipping-russian-post
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2

### Frontend
```bash
# –í –ø–∞–ø–∫–µ frontend
pm2 start server.js --name biomorphx-frontend
pm2 save
```

### Backend
```bash
# –í –ø–∞–ø–∫–µ medusa-backend
pm2 start npm --name biomorphx-backend -- start
pm2 save
```

## üìÅ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```
/home/username/
‚îú‚îÄ‚îÄ biomorphx-frontend/     # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ server.js
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ medusa-backend/         # Medusa backend
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ medusa-config.js
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ logs/                   # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
```

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Medusa
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ `NEXT_PUBLIC_MEDUSA_BACKEND_URL`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Medusa backend –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ medusa-config.js

### 2. –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
psql -h localhost -U biomorphx_user -d biomorphx_medusa

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–Ω–æ–≤–æ
npx medusa migrations run
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ Stripe
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–Ω–µ–ª–∏ Stripe

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### Frontend
```bash
cd biomorphx-frontend
git pull
npm install
npm run build
pm2 restart biomorphx-frontend
```

### Backend
```bash
cd medusa-backend
git pull
npm install
pm2 restart biomorphx-backend
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
pm2 status
pm2 logs biomorphx-frontend
pm2 logs biomorphx-backend
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
psql -h localhost -U biomorphx_user -d biomorphx_medusa -c "SELECT COUNT(*) FROM product;"
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —É –≤–∞—Å –±—É–¥–µ—Ç:

- **Frontend**: `https://yourdomain.com` (Next.js)
- **Backend API**: `https://api.yourdomain.com` (Medusa)
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: `https://yourdomain.com/admin` (Medusa Admin)

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### **Beget "–ë–∏–∑–Ω–µ—Å":**
- **–•–æ—Å—Ç–∏–Ω–≥**: ~500-800 —Ä—É–±/–º–µ—Å
- **PostgreSQL**: –≤–∫–ª—é—á–µ–Ω –≤ —Ç–∞—Ä–∏—Ñ
- **SSL**: –±–µ—Å–ø–ª–∞—Ç–Ω–æ

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- **Stripe**: 2.9% + 30 –∫–æ–ø–µ–µ–∫ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- **–°–î–≠–ö**: –æ—Ç 200 —Ä—É–±–ª–µ–π –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π e-commerce —Å–∞–π—Ç BiomorphX —Å Medusa —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

